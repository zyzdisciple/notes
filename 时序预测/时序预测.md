# 时序预测

<font face="楷体">

> 诸如此类的表示引用

>> 此类型表示开发者的话， 也即个人猜想。

首先，从时间的角度可以把一个序列基本分为3类：

1. 纯随机序列（白噪声序列），这时候可以停止分析，因为就像预测下一次硬币哪一面朝上一样毫无规律。

2. 平稳非白噪声序列，它们的均值和方差是常数，对于这类序列，有成熟的模型来拟合这个序列在未来的发展状况，如AR，MA，ARMA等

3. 非平稳序列，一般做法是把他们转化为平稳的序列，在按照平稳序列的算法进行拟合。如果经过差分后平稳，则应使用ARIMA模型进行拟合。

按预测范围分类：有静态预测和动态预测两类。

静态预测是在一定时间上对事物因果关系的预测。

动态预测是对事物未来发展的预测。

## 概述

一种历史资料延伸预测，也称历史引伸预测法。是以时间数列所能反映的社会经济现象的发展过程和规律性，进行引伸外推，预测其发展趋势的方法。

时间序列，也叫时间数列、历史复数或动态数列。它是将某种统计指标的数值，按时间先后顺序排到所形成的数列。时间序列预测法就是通过编制和分析时间序列，根据时间序列所反映出来的发展过程、方向和趋势，进行类推或延伸，借以预测下一段时间或以后若干年内可能达到的水平。其内容包括：收集与整理某种社会现象的历史资料；对这些资料进行检查鉴别，排成数列；分析时间数列，从中寻找该社会现象随时间变化而变化的规律，得出一定的模式；以此模式去预测该社会现象将来的情况。

其核心则在于， 根据时间排成数列， 生成基础数据集

分析时间序列， 得出模式， 也即模型参数， 最终预测结果。

而时间预测， 是一种 <font color="orange">统计学上的， 大数据， 数据预测方法。</font>

## 时间序列预测法的步骤

1. 收集历史资料，加以整理，编成时间序列，并根据时间序列绘成统计图。时间序列分析通常是把各种可能发生作用的因素进行分类，传统的分类方法是按<font color="orange"> 各种因素的特点或影响效果</font> 分为四大类：(1)长期趋势(T)；(2)季节变动(S)；(3)循环变动(C)；(4)不规则变动(I)。

    >> 这里的分类标准是按照 作用因素分类， 而非结果导向型。 按照因素的特点或影响效果进行分类。

2. 分析时间序列。时间序列中的每一时期的数值都是由许许多多不同的因素同时发生作用后的综合结果。

3. 求时间序列的长期趋势(T)季节变动(S)和不规则变动(I)的值，并选定近似的数学模式来代表它们。对于数学模式中的诸未知参数，使用合适的技术方法求出其值。

4. 利用时间序列资料求出长期趋势、季节变动和不规则变动的数学模型后，就可以利用它来预测未来的长期趋势值T和季节变动值s，在可能的情况下预测不规则变动值I。然后用以下模式计算出未来的时间序列的预测值Y：

    加法模式T+S+I=Y
    
    乘法模式T×S×I=Y

　　如果不规则变动的预测值难以求得，就只求长期趋势和季节变动的预测值，以两者相乘之积或相加之和为时间序列的预测值。如果经济现象本身没有季节变动或不需预测分季分月的资料，则长期趋势的预测值就是时间序列的预测值，即T=Y。但要注意这个预测值只反映现象未来的发展趋势，即使很准确的趋势线在按时间顺序的观察方面所起的作用，本质上也<font color="orange"> 只是一个平均数的作用，实际值将围绕着它上下波动。</font>

## 基本特征

1.时间序列分析法是根据过去的变化趋势预测未来的发展,它的前提是假定事物的过去延续到未来。

时间序列分析, <font color="orange"> 正是根据客观事物发展的连续规律性, 运用过去的历史数据, 通过统计分析, 进一步推测未来的发展趋势。</font>

>> 这种基础概念， 正是我们虽然明白， 知晓， 但是又不能够正确而完全的表述， 总结， 分类的东西。

事物的过去会延续到未来这个假设前提包含两层含义:

   1. 不会发生突然的跳跃变化,是以相对小的步伐前进;

        >> 但这并不意味着完全不能发生突然跳跃的数据， 而是从长期上来看是平稳的。 这意味着， 我们的数据可以是类似， 1 2 3 4 5 128 6 7 9 1 10 12 这样的变化趋势， 而 1 2 3 8 9 10 127 128 19 这样的趋势值是不受欢迎的。

    2. 二是过去和当前的现象可能表明现在和将来活动的发展变化趋向。这就决定了在一般情况下, 时间序列分析法对于短、近期预测比较显著, 但如延伸到更远的将来, 就会出现很大的局限性, 导致预测值偏离实际较大而使决策失误。

        >> 而在这一点上， 我的理解则是， 因为一旦将时间线延伸， 则中间可能出现的变数是在太多， 无论是政策又或是其他。 但是这种<font color="orange"> 更远 </font> 也是一种相对的概念， 研究大陆变迁， 气候变换， 百万年也并不是一个太大的数值， 而研究经济， 研究社会生活中的种种， 几十天可能就是一个很远的 将来了。

    3. 时间序列数据变动存在着规律性与不规律性

        时间序列中的每个观察值大小, 是影响变化的各种不同因素在同一时刻发生作用的综合结果。从这些影响因素发生作用的大小和方向变化的时间特性来看,这些因素造成的时间序列数据的变动分为四种类型。

        * 趋势性:某个变量随着时间进展或自变量变化,呈现一种比较缓慢而长期的持续上升、下降、停留的同性质变动趋向,但变动幅度可能不相等。

        * 周期性:某因素由于外部影响随着自然季节的交替出现高峰与低谷的规律。

            >> 这一点常常也被成为季节性。

        * 随机性:个别为随机变动,整体呈统计规律。
  
        * 综合性:实际变化情况是几种变动的叠加或组合。预测时设法过滤除去不规则变动,突出反映趋势性和周期性变动。

## 时间序列预测法的分类

时间序列预测法可用于短期预测、中期预测和长期预测。

根据对资料分析方法的不同，又可分为：简单序时平均数法、加权序时平均数法、移动平均法、加权移动平均法、趋势预测法、指数平滑法、季节性趋势预测法、市场寿命周期预测法等。

* 简单序时平均数法 也称算术平均法。即把若干历史时期的统计数值作为观察值，求出算术平均数作为下期预测值。这种方法基于下列假设：“过去这样，今后也将这样”，把近期和远期数据等同化和平均化，因此只能适用于事物变化不大的趋势预测。如果事物呈现某种上升或下降的趋势，就不宜采用此法。

* 加权序时平均数法 就是把各个时期的历史数据按近期和远期影响程度进行加权，求出平均值，作为下期预测值。

* 简单移动平均法 就是相继移动计算若干时期的算术平均数作为下期预测值。

* 加权移动平均法 即将简单移动平均数进行加权计算。在确定权数时，近期观察值的权数应该大些，远期观察值的权数应该小些。

上述几种方法虽然简便，能迅速求出预测值，但由于没有考虑整个社会经济发展的新动向和其他因素的影响，所以准确性较差。应根据新的情况，对预测结果作必要的修正。

>> 虽然方法简单，在生产使用中往往不会使用这种方法， 但并非是毫无意义， 这类的算法，往往是一切衍生算法的基石。

* 指数平滑法 即根据历史资料的上期实际数和预测值，用指数加权的办法进行预测。此法实质是由内加权移动平均法演变而来的一种方法，优点是只要有上期实际数和上期预测值，就可计算下期的预测值，这样可以节省很多数据和处理数据的时间，减少数据的存储量，方法简便。是国外广泛使用的一种短期预测方法。

* 季节趋势预测法 根据经济事物每年重复出现的周期性季节变动指数，预测其季节性变动趋势。推算季节性指数可采用不同的方法，常用的方法有季(月)别平均法和移动平均法两种：a．季(月)别平均法。就是把各年度的数值分季(或月)加以平均，除以各年季(或月)的总平均数，得出各季(月)指数。这种方法可以用来分析生产、销售、原材料储备、预计资金周转需要量等方面的经济事物的季节性变动；b．移动平均法。即应用移动平均数计算比例求典型季节指数。

* 市场寿命周期预测法 就是对产品市场寿命周期的分析研究。例如对处于成长期的产品预测其销售量，最常用的一种方法就是根据统计资料，按时间序列画成曲线图，再将曲线外延，即得到未来销售发展趋势。最简单的外延方法是直线外延法，适用于对耐用消费品的预测。这种方法简单、直观、易于掌握。

> 短期预测是指对一年以下的市场发展变化的预测。相比较而言，短期预测要求更具体、更明确。因此要求短期预测有比较准确的数据和结果。这种预测一般采用定性分析和定量分析相结合的方法，而以定量分析为主。短期预测中的月度预测、逐周或逐月预测，称之为近期预测.

> 定量预测：采集历史数据并用数学模型来外推将来。
> 
> 定性预测：可以是对将来的主观或直觉的预期。

以上参考资料来自于：

>[时间序列预测法](https://wiki.mbalib.com/wiki/%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E9%A2%84%E6%B5%8B%E6%B3%95)

### 算法分类

按预测方法分类：有定性预测和定量预测。

定性预测主要包括特尔菲法，主观概率法，交叉概率法等。

定量预测又称统计预测，主要包括回归分析法，时间序列法，马尔科夫预测法等。我们这里主要说说定量预测。

方法 | 时间范围 | 适用情况
-|-|-
一元线性回归方法 | 短、中期 | 自变量和应变量有线性关系

多元线性回归方法 | 短、中期 | 应变量与两个及以上自变量由线性关系

非线性方法 | 短、中期 | 应变量与自变量有非线性关系

趋势外推法 | 中、长期 | 被预测变量用时间表示时，用非线性回归

分解分析方法 | 短期 | 一次性或作为消除季节变动因素的方法

指数平滑法 | 短期 | 有或无季节变动的反复预测

灰色预测法 | 短、中期 | 时序发展为指数趋势

ARMA预测法 | 短期 | 平稳时间预测

ARIMA预测法 | 短期 | 不带季节变动的反复预测

季节变动预测 | 短、中期 | 一年内有重复出现规律的变动

景气预测法 | 短、中期 | 时序的延续及转折预测

状态空间模型 | 短、中期 | 各类时序预测

马尔科夫预测法 | 短期 | 连续时间变化分为多个状态，计算系统状态转移率

数据挖掘方法 | 多种情况 | 高维时间序列或非时间序列的判别预测

>> 而对于我们所使用的数据， 以及要达成的目的来看， 有这样几个特征， 是属于短期预测的数据， 数据的预测周期一般为 八小时， 一天， 一周， 一月 一季度这样的长度。而从周期性来看， 目前所需要预测的数据具有极强的周期性， 而并非简单的线性关系。所需要采用的算法可能是 指数平滑法， ARIMA预测法， 季节变动预测法中的几种。

>> 时序预测也可以适应多种情况， 对于现实生活中的绝大多数数据都能够进行拟合， 建模， 预测， 因此需要着重以能够做周期性预测的方法为准。

## 周期性预测

在了解周期性预测之前， 首先需要了解一个关键的概念：平稳性

平稳时间序列粗略地讲，一个时间序列，如果均值没有系统的变化（无趋势）、方差没有系统变化，且严格消除了周期性变化，就称之是平稳的。

>> 这里的趋势要强调： 一个是时间周期， 可能在短时间内存在上升或下降趋势，但从长时间来看，数据却没有系统性的变化， 或周期性的变化。

具体的衡量计算方式是：

均值、方差 均是与时间t无关的常数， 协方差是只与时间间隔有关， 与时间t无关的常数。

>>所以对于我所需要处理的数据而言， 在短期8小时，一天的时间跨度范围而言是非平稳的。但是将时长上升到一月，一年又是平稳的。

>>因而接下来的重点目标在于 ARIMA模型 以及 指数平滑法， 指数平滑法（Holt-Winters）中有三种， 一次 二次 三次，有时hot-winters方法也特指 三次指数平滑法。

### ARIMA模型

自回归移动平均模型(Autoregressive Integrated Moving Average Model,简记ARIMA)

>[ARIMA模型](https://wiki.mbalib.com/wiki/ARIMA%E6%A8%A1%E5%9E%8B)

ARIMA模型全称为自回归移动平均模型(Autoregressive Integrated Moving Average Model,简记ARIMA)，是由博克思(Box)和詹金斯(Jenkins)于70年代初提出的一著名时间序列预测方法，所以又称为box-jenkins模型。其中ARIMA（p，d，q）称为差分自回归移动平均模型，AR是自回归, p为自回归项; MA为移动平均，q为移动平均项数，d为时间序列成为平稳时所做的差分次数。

#### 基本思想

ARIMA模型的基本思想是：将预测对象随时间推移而形成的数据序列视为一个随机序列，用一定的数学模型来近似描述这个序列。这个模型一旦被识别后就可以从时间序列的过去值及现在值来预测未来值。现代统计方法、计量经济模型在某种程度上已经能够帮助企业对未来进行预测。

>[ARIMA模型详解](http://danzhuibing.github.io/ml_arima_basic.html)

>[Holt-Winters与时间序列预测](https://www.jianshu.com/p/fcd20a048adb)

>[时间序列分析之holtwinters和ARIMA](https://blog.csdn.net/huangtiao2509/article/details/78251101)

</font>